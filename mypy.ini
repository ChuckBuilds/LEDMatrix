[mypy]
# Mypy configuration for LEDMatrix

# Python version
python_version = 3.10

# Platform (Linux/Raspberry Pi)
platform = linux

# Follow imports
follow_imports = normal

# Ignore missing imports (for optional dependencies)
ignore_missing_imports = True

# Show error codes
show_error_codes = True

# Warn about unused ignores
warn_unused_ignores = True

# Warn about unreachable code
warn_unreachable = True

# Strict optional checking
strict_optional = True

# Disallow untyped definitions
disallow_untyped_defs = False  # Set to True once all code is typed

# Disallow untyped calls
disallow_untyped_calls = False  # Set to True once all code is typed

# Check untyped definitions
check_untyped_defs = True

# No implicit optional
no_implicit_optional = True

# Warn about return Any
warn_return_any = True

# Warn about unused configs
warn_unused_configs = True

# Per-module options
[mypy-src.*]
# Allow untyped for now, but check typed code
disallow_untyped_defs = False
disallow_untyped_calls = False

[mypy-src.cache_manager]
# Cache manager has comprehensive type hints
disallow_untyped_defs = True
disallow_untyped_calls = True

[mypy-src.config_manager]
# Config manager has comprehensive type hints
disallow_untyped_defs = True
disallow_untyped_calls = True

[mypy-src.plugin_system.*]
# Plugin system has type hints
disallow_untyped_defs = False
disallow_untyped_calls = False

[mypy-src.exceptions]
# Exceptions module
disallow_untyped_defs = True

# Ignore third-party libraries that may not have type stubs
[mypy-rgbmatrix.*]
ignore_missing_imports = True

[mypy-RGBMatrixEmulator.*]
ignore_missing_imports = True

[mypy-PIL.*]
ignore_missing_imports = True

[mypy-freetype.*]
ignore_missing_imports = True

[mypy-pytz.*]
ignore_missing_imports = True

[mypy-requests.*]
ignore_missing_imports = True

[mypy-Flask.*]
ignore_missing_imports = True

[mypy-google.*]
ignore_missing_imports = True

[mypy-spotipy.*]
ignore_missing_imports = True

# Exclude test files and generated files
exclude = (?x)(
    ^test/.*|
    ^.*/__pycache__/.*|
    ^.*\.pyc$
)

